# 게임 테스트 자동화

## 설명
MapleQuest RPG 게임을 자동으로 브라우저에서 실행하고 테스트 가이드를 제공하는 스킬입니다. 최근 변경사항을 분석하여 집중적으로 테스트해야 할 항목을 알려줍니다.

## 사용법
```bash
/game-test
```

특정 기능만 테스트:
```bash
/game-test --focus=skills     # 스킬 테스트
/game-test --focus=monsters   # 몬스터 테스트
/game-test --focus=ui         # UI 테스트
```

## 동작 과정

1. **최근 변경사항 분석**
   - `git diff`로 최근 수정 내용 확인
   - 변경된 기능 영역 파악 (스킬/몬스터/UI/버프 등)
   - 테스트 우선순위 결정

2. **게임 실행**
   - 기본 브라우저에서 `game.html` 자동 실행
   - Windows: `start game.html`
   - macOS: `open game.html`
   - Linux: `xdg-open game.html`

3. **테스트 체크리스트 제공**
   - 변경사항 기반 맞춤형 체크리스트 생성
   - 각 항목별 테스트 방법 안내
   - 예상 결과 및 버그 징후 설명

4. **테스트 결과 기록**
   - 테스트 결과를 간단히 기록
   - 발견된 버그는 즉시 이슈로 정리

## 테스트 체크리스트

### 기본 동작 테스트
- [ ] 게임 로딩 정상 (검은 화면 없음, 에러 없음)
- [ ] 직업 선택 화면 표시
- [ ] 3개 직업 카드 호버 효과 작동
- [ ] 직업 선택 후 게임 시작

### 캐릭터 조작 테스트
- [ ] ← → 키로 좌우 이동
- [ ] ↑ / Space / W 키로 점프
- [ ] 플랫폼 착지 정상
- [ ] 화면 경계에서 멈춤 (떨어지지 않음)

### 전투 시스템 테스트

**기본공격 (A키):**
- [ ] 공격 애니메이션 표시
- [ ] 쿨다운 작동 (연타 시 무시됨)
- [ ] 몬스터 피해 적용
- [ ] 대미지 텍스트 표시

**스킬 (Z/X/C키):**
- [ ] 각 스킬 실행 정상
- [ ] MP 소모 정상
- [ ] 쿨다운 표시 (스킬바 숫자)
- [ ] 스킬 효과 정상 (이펙트 표시)
- [ ] 쿨다운 완료 시 초록 테두리

**버프 스킬 (C키):**
- [ ] 버프 아이콘 좌상단 표시
- [ ] 버프 효과 적용 (공격력↑ 또는 속도↑)
- [ ] 버프 지속시간 표시
- [ ] 버프 만료 시 자동 제거

### 몬스터 테스트
- [ ] 몬스터 자동 스폰 (2~5초 간격)
- [ ] 플레이어 자동 추적
- [ ] 충돌 시 플레이어 피해
- [ ] HP 바 감소 정상
- [ ] 처치 시 경험치 획득
- [ ] 레벨별 몬스터 스케일링 확인

### 레벨업 시스템 테스트
- [ ] EXP 바 증가 정상
- [ ] 레벨업 시 "LEVEL UP!" 이펙트 표시
- [ ] HP/MP 최대치 증가
- [ ] 공격력 증가 (HUD에서 확인)
- [ ] HP/MP 자동 회복 (레벨업 시)

### UI 테스트
- [ ] HP 바 색상 정상 (초록/노랑/빨강)
- [ ] MP 바 색상 정상 (파랑)
- [ ] EXP 바 증가 애니메이션
- [ ] 스탯 표시 정확 (공격력, 크리율, 처치수)
- [ ] 버프 아이콘 표시 및 시간 업데이트
- [ ] 대미지 텍스트 색상 구분 (일반/크리/백스탭)

### 성능 테스트
- [ ] 몬스터 10마리 이상일 때 프레임 드롭 없음
- [ ] 파티클 많을 때 렌더링 정상
- [ ] 장시간 플레이 시 메모리 누수 없음

## 직업별 테스트 가이드

### ⚔️ 전사 (Warrior)
```
기본공격: 검 휘두르기 + 밀치기 확인
[Z] 파워 스트라이크: 강한 단일 타격 + 강한 밀치기
[X] 슬래시 블래스트: 원형 범위 공격 (주변 몬스터 동시 타격)
[C] 레이지: 빨간 불꽃 이펙트 + 공격력 1.5배 (10초)
```

### 🗡️ 도적 (Thief)
```
기본공격: 초고속 2연타 확인
[Z] 삼중 스탭: 빠른 3연타
[X] 어쌔시네이트: 몬스터 뒤로 순간이동 + 2배 피해 (백스탭 보장)
[C] 헤이스트: 보조색 속도선 이펙트 + 이동속도 1.5배 (10초)
```

### 🏹 궁수 (Archer)
```
기본공격: 화살 발사 (원거리 투사체)
[Z] 더블 샷: 화살 2발 각도 분산 발사
[X] 애로우 레인: 넓은 범위에 화살비 (지면 타격)
[C] 소울 애로우: 영혼빛 이펙트 + 화살 관통 (10초)
```

## 변경사항별 테스트 가이드

### 새 스킬 추가 시
```
테스트 우선순위:
1. 스킬 실행 (키 입력 반응)
2. MP 소모 및 쿨다운
3. 피해 적용 (몬스터 HP 감소)
4. 범위 판정 (AoE 스킬인 경우)
5. 시각 이펙트 표시
6. 버그 확인:
   - 쿨다운 중 재실행 안됨
   - MP 부족 시 실행 안됨
   - 이펙트 누락 없음
   - 피해 계산 정확
```

### 새 몬스터 추가 시
```
테스트 우선순위:
1. 출현 조건 (레벨 확인)
2. 렌더링 (스프라이트 표시)
3. AI 동작 (플레이어 추적)
4. 충돌 판정
5. HP 스케일링
6. 경험치 보상
7. 버그 확인:
   - 화면 밖으로 이탈 안함
   - 중첩 시 렌더링 깨짐 없음
   - 처치 후 정상 제거
```

### UI 변경 시
```
테스트 우선순위:
1. 레이아웃 정렬
2. 색상 대비 (가독성)
3. 애니메이션 부드러움
4. 반응형 동작 (창 크기 변경)
5. 폰트 크기 적절
6. 버그 확인:
   - 요소 겹침 없음
   - 텍스트 짤림 없음
   - 깜빡임 없음
```

### 리팩토링 후
```
테스트 우선순위:
1. 기존 기능 동작 (회귀 테스트)
2. 성능 비교 (전후 프레임)
3. 에러 콘솔 확인
4. 버그 확인:
   - 기존 기능 모두 작동
   - 새로운 버그 없음
   - 성능 저하 없음
```

## 버그 체크 포인트

### 자주 발생하는 버그

**쿨다운 관련:**
- 쿨다운 무시되고 연속 실행됨
- 쿨다운 표시 안됨
- 쿨다운 완료 후에도 실행 안됨

**충돌 판정:**
- 공격이 몬스터를 관통함
- 피해가 중복 적용됨
- 범위 공격이 전혀 안맞음

**이펙트/파티클:**
- 이펙트가 표시 안됨
- 파티클이 사라지지 않음
- 좌표가 잘못되어 엉뚱한 곳에 표시

**버프:**
- 버프 효과가 적용 안됨
- 버프가 만료되지 않음
- 버프 중첩 버그

**스케일링:**
- 레벨업 시 스탯이 안오름
- 몬스터 HP가 레벨에 비례하지 않음

## 예시

### 예시 1: 기본 테스트
```bash
/game-test
```

**결과:**
```
최근 변경사항 분석 중...
변경 영역: game.html (스킬 추가)

=== 게임 실행 중 ===
브라우저에서 game.html을 열었습니다.

=== 테스트 체크리스트 ===

우선 테스트 항목 (최근 변경사항 관련):
✓ 1. 독 단검 스킬 (Z키) 실행 확인
✓ 2. 투사체 발사 및 충돌 확인
✓ 3. DoT 피해 적용 (0.5초마다 4회)
✓ 4. 녹색 독 이펙트 표시 확인

기본 회귀 테스트:
□ 5. 기존 스킬 정상 작동
□ 6. 몬스터 스폰 및 AI
□ 7. 레벨업 시스템
```

### 예시 2: 특정 영역 집중 테스트
```bash
/game-test --focus=monsters
```

**결과:**
```
=== 몬스터 시스템 집중 테스트 ===

테스트 순서:
1. 각 레벨에서 새 몬스터 출현 확인:
   - Lv1: 슬라임, 머쉬룸
   - Lv3: 스텀프 추가
   - Lv15: 불타는 버그 추가 (구현 예정)

2. 몬스터별 HP 스케일링:
   - 슬라임: 30 + Lv×10
   - 머쉬룸: 50 + Lv×15
   - 스텀프: 80 + Lv×20

3. AI 패턴 확인:
   - 플레이어 추적 속도
   - 화면 경계 처리
   - 충돌 후 밀림 동작

버그 의심 포인트:
⚠ 몬스터가 화면 밖으로 이탈하는가?
⚠ 여러 마리 중첩 시 렌더링 문제?
⚠ 처치 후 경험치 정확한가?
```

## 주의사항

1. **브라우저 캐시**
   - 변경사항이 반영 안되면 캐시 지우고 새로고침 (Ctrl+Shift+R)
   - 또는 개발자 도구에서 "Disable cache" 활성화

2. **콘솔 에러 확인**
   - F12로 개발자 도구 열기
   - Console 탭에서 에러 메시지 확인
   - 빨간 에러가 있으면 즉시 수정 필요

3. **성능 모니터링**
   - FPS가 30 이하로 떨어지면 최적화 필요
   - 메모리 누수 확인 (Performance 탭)

4. **여러 직업 테스트**
   - 스킬 추가 시 모든 직업에서 영향 없는지 확인
   - 특히 버프 시스템은 직업 간 공유됨

## 관련 명령어

- `/git-auto` - 테스트 통과 후 커밋
- `/add-character-skill` - 새 스킬 추가
- `/add-monster` - 새 몬스터 추가
- `/balance-calc` - 밸런스 계산

## 트러블슈팅

### 게임이 실행 안됨
```bash
# 파일 경로 확인
ls game.html

# 수동으로 실행
start game.html  # Windows
open game.html   # macOS
```

### 변경사항이 반영 안됨
```bash
# 브라우저 캐시 강제 새로고침
# Ctrl+Shift+R (Windows/Linux)
# Cmd+Shift+R (macOS)
```

### 검은 화면만 표시됨
```
1. F12로 개발자 도구 열기
2. Console 탭에서 에러 확인
3. JavaScript 문법 오류 수정
```
